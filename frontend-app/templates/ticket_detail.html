{% extends "base.html" %}
{% block content %}
<div class="ticket-header">
    <a href="{{ url_for('dashboard') }}">â† Back</a>
    <h2>#{{ ticket.id }} {{ ticket.title }}</h2>
    <p><strong>Created at:</strong> {{ ticket.created_at[:16]|replace('T', ' ') }}</p>
    <p>{{ ticket.description }}</p>
    <p>Current Status: <span class="badge {{ ticket.status }}">{{ ticket.status }}</span></p>
</div>

{% if session.is_staff or session.is_admin %}
<div class="status-update-box">
    <h4>Update Status</h4>
    <form action="{{ url_for('update_ticket_status', ticket_id=ticket.id) }}" method="post">
        <select name="status">
            <option value="new" {% if ticket.status == 'new' %}selected{% endif %}>New</option>
            <option value="in_progress" {% if ticket.status == 'in_progress' %}selected{% endif %}>In Progress</option>
            <option value="closed" {% if ticket.status == 'closed' %}selected{% endif %}>Closed</option>
        </select>
        <button type="submit">Update</button>
    </form>
</div>
{% endif %}

<div class="reports-section">
    </div>
{% endblock %}